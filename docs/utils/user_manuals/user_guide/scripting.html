<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Plugin Development" href="../plugins_manual/plugin_manual_index.html" /><link rel="prev" title="Menus and Session Management" href="menus_and_sessions.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Scripting with Poriscope - Poriscope 1.5.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">Poriscope 1.5.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">Poriscope 1.5.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">User Manuals:</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">User Guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of User Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="workflow_overview.html">Workflow Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html">Tutorial and Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="raw_data_tab.html">Raw Data Tab</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_analysis_tab.html">Event Analysis Tab</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata_tab.html">MetaData Tab</a></li>
<li class="toctree-l2"><a class="reference internal" href="clustering_tab.html">Clustering Tab</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html">Settings Tab</a></li>
<li class="toctree-l2"><a class="reference internal" href="menus_and_sessions.html">Menus and Session Management</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Scripting with Poriscope</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../plugins_manual/plugin_manual_index.html">Plugin Development</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Plugin Development</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../plugins_manual/getting_started.html">Getting Started</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../plugins_manual/system_architecture/index.html">System Architecture</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of System Architecture</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../plugins_manual/system_architecture/mainview_overview.html">MainView Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins_manual/system_architecture/mainmodel_overview.html">MainModel Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins_manual/system_architecture/maincontroller_overview.html">MainController Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../MainMVC/MainView.html">MainView</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../MainMVC/MainModel.html">MainModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../MainMVC/MainController.html">MainController</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../plugins_manual/where_to_begin/index.html">Where to Begin</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Where to Begin</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../plugins_manual/where_to_begin/where_to_begin.html">Where to Begin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins_manual/where_to_begin/understanding_base_classes.html">Understanding Base Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins_manual/where_to_begin/understanding_signals.html">Understanding Signals</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../plugins_manual/frontend_plugin/frontend_plugin_manual_index.html">Frontend Plugin Development</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Frontend Plugin Development</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../plugins_manual/frontend_plugin/ready_to_build/index.html">Ready to Build Your Own Plugin?</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Ready to Build Your Own Plugin?</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/frontend_plugin/ready_to_build/metaview_base.html">MetaView as a Base Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/frontend_plugin/ready_to_build/metamodel_base.html">MetaModel as a Base Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/frontend_plugin/ready_to_build/metacontroller_base.html">MetaController as a Base Class</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../plugins_manual/frontend_plugin/hello_world_tutorial.html">Keeping It Minimal: HelloWorld Tutorial</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../plugins_manual/frontend_plugin/simpleCalc/from_helloworld_to_full_mvc.html">From HelloWorld to a Full MVC Analysis Tab</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of From HelloWorld to a Full MVC Analysis Tab</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/frontend_plugin/simpleCalc/simpleCalc_code.html">SimpleCalc Full Code Example</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../plugins_manual/frontend_plugin/next_steps/index.html">What’s next ?</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of What’s next ?</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/frontend_plugin/next_steps/adding_walkthrough.html">Adding a Walkthrough to Your Custom MVC Plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../plugins_manual/backend_plugin/backend_plugin_manual_index.html">Backend Plugin Development</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Backend Plugin Development</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../plugins_manual/backend_plugin/ready_to_build/index.html">Ready to Build Your Own Data Plugin?</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Ready to Build Your Own Data Plugin?</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/backend_plugin/ready_to_build/base_data_plugin.html">Base Data Plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/backend_plugin/ready_to_build/meta_reader.html">Build a MetaReader subclass</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/backend_plugin/ready_to_build/meta_filter.html">Building a MetaFilter subclass</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/backend_plugin/ready_to_build/meta_event_finder.html">Building a MetaEventFinder subclass</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/backend_plugin/ready_to_build/meta_event_writer.html">Building a MetaWriter subclass</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/backend_plugin/ready_to_build/meta_event_loader.html">Build a MetaEventLoader subclass</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/backend_plugin/ready_to_build/meta_event_fitter.html">Build a MetaEventFitter subclass</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/backend_plugin/ready_to_build/meta_database_writer.html">Build a MetaDatabaseWriter subclass</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plugins_manual/backend_plugin/ready_to_build/meta_database_loader.html">Build a MetaDatabaseLoader subclass</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Base Classes:</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../autodoc/metaclasses/metaclasses_index.html">Abstract Base Classes</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Abstract Base Classes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../autodoc/metaclasses/basedataplugin.html">BaseDataPlugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../autodoc/metaclasses/metacontroller.html">MetaController</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../autodoc/metaclasses/metadatabaseloader.html">MetaDatabaseLoader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../autodoc/metaclasses/metadatabasewriter.html">MetaDatabaseWriter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../autodoc/metaclasses/metaeventfinder.html">MetaEventFinder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../autodoc/metaclasses/metaeventfitter.html">MetaEventFitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../autodoc/metaclasses/metaeventloader.html">MetaEventLoader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../autodoc/metaclasses/metafilter.html">MetaFilter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../autodoc/metaclasses/metamodel.html">MetaModel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../autodoc/metaclasses/metareader.html">MetaReader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../autodoc/metaclasses/metaview.html">MetaView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../autodoc/metaclasses/metawriter.html">MetaWriter</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plugins:</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../autodoc/plugins/plugins_index.html">Plugins</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Plugins</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/analysistabs.html">Analysistabs</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Analysistabs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/eventanalysiscontroller.html">EventAnalysisController</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/rawdatamodel.html">RawDataModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/eventanalysismodel.html">EventAnalysisModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/metadatamodel.html">MetadataModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/metadataview.html">MetadataView</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/clusteringview.html">ClusteringView</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/clusteringcontroller.html">ClusteringController</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/eventanalysisview.html">EventAnalysisView</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/metadatacontroller.html">MetadataController</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/clusteringmodel.html">ClusteringModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/rawdatacontroller.html">RawDataController</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/rawdataview.html">RawDataView</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/utils/utils_index.html">Utils</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Utils</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/utils/eventanalysiscontrols.html">EventAnalysisControls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/utils/pluginmanager.html">PluginManager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/utils/walkthroughmixin.html">WalkthroughMixin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/utils/rawdatacontrols.html">RawDataControls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/utils/introdialog.html">IntroDialog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/utils/overlay.html">Overlay</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/utils/stepdialog.html">StepDialog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/utils/metadatacontrols.html">MetadataControls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autodoc/plugins/analysistabs/utils/clusteringcontrols.html">ClusteringControls</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../autodoc/plugins/datareaders/datareaders.html">Datareaders</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of Datareaders</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/datareaders/abf2reader.html">ABF2Reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/datareaders/singlebinarydecoder.html">SingleBinaryDecoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/datareaders/chimerareader20240501.html">ChimeraReader20240501</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/datareaders/chimerareadervc100.html">ChimeraReaderVC100</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/datareaders/binaryreader1x.html">BinaryReader1X</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/datareaders/chimerareader20240101.html">ChimeraReader20240101</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../autodoc/plugins/datawriters/datawriters.html">Datawriters</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Datawriters</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/datawriters/sqliteeventwriter.html">SQLiteEventWriter</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../autodoc/plugins/db_loaders/db_loaders.html">Db Loaders</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Db Loaders</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/db_loaders/sqlitedbloader.html">SQLiteDBLoader</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../autodoc/plugins/dbwriters/dbwriters.html">Dbwriters</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Dbwriters</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/dbwriters/sqlitedbwriter.html">SQLiteDBWriter</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../autodoc/plugins/eventfinders/eventfinders.html">Eventfinders</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of Eventfinders</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/eventfinders/classicblockagefinder.html">ClassicBlockageFinder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/eventfinders/boundedblockagefinder.html">BoundedBlockageFinder</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../autodoc/plugins/eventfitters/eventfitters.html">Eventfitters</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of Eventfitters</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/eventfitters/peakfinder.html">PeakFinder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/eventfitters/cusum.html">CUSUM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/eventfitters/intracusum.html">IntraCUSUM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/eventfitters/p6flags.html">P6Flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/eventfitters/singlesublevel.html">SingleSublevel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/eventfitters/hackylist.html">HackyList</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/eventfitters/sublevels.html">Sublevels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/eventfitters/nanotrees.html">NanoTrees</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../autodoc/plugins/eventloaders/eventloaders.html">Eventloaders</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of Eventloaders</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/eventloaders/sqliteeventloader.html">SQLiteEventLoader</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../autodoc/plugins/filters/filters.html">Filters</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of Filters</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/filters/waveletfilter.html">WaveletFilter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autodoc/plugins/filters/besselfilter.html">BesselFilter</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Signals:</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../signals/global_signal/global_signal.html">Global Signal</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of Global Signal</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../signals/global_signal/overview.html">API Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../signals/global_signal/example_usage.html">Example Usage: RawDataView</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../signals/data_plugin_controller_signal/data_plugin_controller_signal.html">Data Plugin Controller Signal</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of Data Plugin Controller Signal</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../signals/data_plugin_controller_signal/overview.html">API Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../signals/data_plugin_controller_signal/example_usage.html">Example Usage: RawDataView</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../signals/which_one_to_use/which_one_to_use.html">Which to use</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Logging Decorators:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../loggers_index.html">Logging</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../../_sources/utils/user_manuals/user_guide/scripting.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="scripting-with-poriscope">
<span id="scripting"></span><h1>Scripting with Poriscope<a class="headerlink" href="#scripting-with-poriscope" title="Link to this heading">¶</a></h1>
<p>While poriscope provides an <a class="reference internal" href="../plugins_manual/frontend_plugin/ready_to_build/index.html#build-frontend-plugin"><span class="std std-ref">easily extensible</span></a> graphical interface that makes it easy to analyze data, you do not need to use the graphical interface at all in order to get the full benefit of poriscope. The GUI is great for exploring data and working with experiments with up to ~10 channels, but in cases where you eed to do batch analysis on a large number of experiments or are working with a large number of channels, it is likely more efficient to write custom workflow scripts, and only engage with the GUI for <a class="reference internal" href="metadata_tab.html#metadata-tab"><span class="std std-ref">postprocessing and visualizing</span></a> of the fits. In such cases, all of the <a class="reference internal" href="../../../autodoc/plugins/plugins_index.html#plugins-index"><span class="std std-ref">backend data plugins</span></a> (except for analysis tabs) can be used as standalone python objects in custom analysis pipelines.</p>
<p>In this tutorial, we walk you through writing a custom script that reproduces the full poriscope analysis workflow, from reading raw data to loading a database of fitted event metadata.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Throughout this tutorial we only use those parts of the API that are necessary for a bare-bones analysis workflow, but there are lots more operations that can be done with the plugins we will demonstrate. For a full API reference, see the Public Methods section of each entry in the list of <a class="reference internal" href="../../../autodoc/metaclasses/metaclasses_index.html#metaclasses-index"><span class="std std-ref">Abstract Base Classes</span></a></p>
</div>
<section id="setting-up-our-workspace">
<h2>Setting up our workspace<a class="headerlink" href="#setting-up-our-workspace" title="Link to this heading">¶</a></h2>
<p>First, we need to import all the plugins we are going use. For this example we’ll take the following plugins, but you can swap out any plugin of the appropriate base class for your own analysis, as long as you take care to update the required settings later in the script. We will also import the logger and configure it to only give us warning-level output.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">poriscope</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
                        <span class="n">ABF2Reader</span><span class="p">,</span>             <span class="c1">#inherits from MetaReader</span>
                        <span class="n">BesselFilter</span><span class="p">,</span>           <span class="c1">#inherits from MetaFilter</span>
                        <span class="n">ClassicBlockageFinder</span><span class="p">,</span>  <span class="c1">#inherits from MetaEventFinder</span>
                        <span class="n">SQLiteEventWriter</span><span class="p">,</span>      <span class="c1">#inherits from MetaWriter</span>
                        <span class="n">SQLiteEventLoader</span><span class="p">,</span>      <span class="c1">#inherits from MetaEventLoader</span>
                        <span class="n">CUSUM</span><span class="p">,</span>                  <span class="c1">#inherits from MetaEventFitter</span>
                        <span class="n">SQLiteDBWriter</span><span class="p">,</span>         <span class="c1">#inherits from MetaDatabaseWriter</span>
                        <span class="n">SQLiteDBLoader</span>          <span class="c1">#inherits from MetaDatabaseLoader</span>
                      <span class="p">)</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">formatter</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2">: </span><span class="si">%(levelname)s</span><span class="s2">: </span><span class="si">%(threadName)s</span><span class="s2">(</span><span class="si">%(thread)d</span><span class="s2">): </span><span class="si">%(name)s</span><span class="s2">: </span><span class="si">%(message)s</span><span class="s2">&quot;</span>
    <span class="p">)</span>

<span class="c1">#log at level WARNING</span>
<span class="n">root_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
<span class="n">root_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>

<span class="c1">#log to the console for simple debugging</span>
<span class="n">consoleHandler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()</span>
<span class="n">consoleHandler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
<span class="n">root_logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">consoleHandler</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Poriscope uses the python logging module for error handling and information exchange with the user. If you do not configure the logger properly, it is likely that errors will pass silently, making it much more difficult to debug. The logging configuration above will suffice for the vast majority of scripting tasks. We suggest using log level``WARNING`` in most cases. <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> mode can be used for the obvious purpose, but the density of logged output will significantly slow down execution of your script.</p>
</div>
</section>
<section id="loading-raw-data">
<h2>Loading raw data<a class="headerlink" href="#loading-raw-data" title="Link to this heading">¶</a></h2>
<p>When using plugins in scripting mode, instantiation proceeds in two steps:</p>
<ol class="arabic simple">
<li><p>Create an instance of the plugin and (optionally) print out its empty settings dictionary to learn what settings you must supply to it</p></li>
<li><p>Fill in and apply the settings dictionary to the plugin instance</p></li>
</ol>
<p>We will print out the settings for the first plugin to illustrate how it is done, and skip that step for subsequent ones.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">raw_data</span> <span class="o">=</span> <span class="n">ABF2Reader</span><span class="p">()</span>

<span class="n">data_settings</span> <span class="o">=</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get_empty_settings</span><span class="p">(</span><span class="n">standalone</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1">#stadnalone=True tells our plugin  that it is not part of a GUI</span>

<span class="c1">#print the settings dict:</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data_settings</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>


<span class="c1">#clearly, data settings have only a single settings key &quot;Input File&quot;, for which we must add a &quot;Value&quot;  keyword to the sub-dictionary:</span>
<span class="n">data_settings</span><span class="p">[</span><span class="s2">&quot;Input File&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&lt;&lt;Path to your ABF input file&gt;&gt;&quot;</span>

<span class="c1"># apply the settings</span>
<span class="n">raw_data</span><span class="o">.</span><span class="n">apply_settings</span><span class="p">(</span><span class="n">data_settings</span><span class="p">)</span>


<span class="c1"># we can print out a brief report on the channels to check that everything worked well:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">raw_data</span><span class="o">.</span><span class="n">report_channel_status</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is possible to supple the settings dict directly to the class constructor if you prefer, in which case you can skip step 2. This just requires that you have your settings dict ready to go and properly formatted. Doing it in two steps gives you the option to print out the required settings in cases where you are using a new plugin type and are unsure of the settings (and haven’t read the docs for that plugin, in which case this note probably won’t help you either).</p>
</div>
</section>
<section id="create-a-filter">
<h2>Create a filter<a class="headerlink" href="#create-a-filter" title="Link to this heading">¶</a></h2>
<p>Before trying to find events, we will probably need a low-pass filter. For this tutorial we’ll use a Bessel filter. Make sure you update the cutoff to work with your own data!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_filter</span> <span class="o">=</span> <span class="n">BesselFilter</span><span class="p">()</span>
<span class="n">filter_settings</span> <span class="o">=</span> <span class="n">data_filter</span><span class="o">.</span><span class="n">get_empty_settings</span><span class="p">()</span>
<span class="n">filter_settings</span><span class="p">[</span><span class="s2">&quot;Cutoff&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">250000.0</span>
<span class="n">filter_settings</span><span class="p">[</span><span class="s2">&quot;Samplerate&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">get_samplerate</span><span class="p">()</span> <span class="c1">#pull the sampling rate directly from the reader plugin we already instantiated</span>
<span class="n">data_filter</span><span class="o">.</span><span class="n">apply_settings</span><span class="p">(</span><span class="n">filter_settings</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are working with multiple datasets with different sampling rates, be sure to create dedicated filter objects for each one. Bessel filters in particular require a samplerate parameter that may result in issues if applied to a dataset with a mismatched sampling rate. The plugin will not check this for you.</p>
</div>
</section>
<section id="finding-events">
<h2>Finding events<a class="headerlink" href="#finding-events" title="Link to this heading">¶</a></h2>
<p>Next, we must create an eventfinder object that is associated to our data reader.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># create an event finder</span>
<span class="n">event_finder</span> <span class="o">=</span> <span class="n">ClassicBlockageFinder</span><span class="p">()</span>
<span class="n">event_finder_settings</span> <span class="o">=</span> <span class="n">event_finder</span><span class="o">.</span><span class="n">get_empty_settings</span><span class="p">(</span><span class="n">standalone</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">event_finder_settings</span><span class="p">[</span><span class="s2">&quot;MetaReader&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">raw_data</span>  <span class="c1"># tell it where to find the raw data in which to find events</span>
<span class="n">event_finder_settings</span><span class="p">[</span><span class="s2">&quot;Threshold&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1000.0</span>
<span class="n">event_finder_settings</span><span class="p">[</span><span class="s2">&quot;Min Duration&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">event_finder_settings</span><span class="p">[</span><span class="s2">&quot;Max Duration&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10000.0</span>
<span class="n">event_finder_settings</span><span class="p">[</span><span class="s2">&quot;Min Separation&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">event_finder</span><span class="o">.</span><span class="n">apply_settings</span><span class="p">(</span><span class="n">event_finder_settings</span><span class="p">)</span>
</pre></div>
</div>
<p>This eventfinder is now locked to our current reader and will only pull data from that reader. If you need ot analyze multiple raw datasets, you would need an additional eventfinder object for each one. Note that we have not locked the filter object to either the reader or the eventfinder. Filters are intended to be mixed and  matched as needed and are not specific to any one dataset.</p>
<p>We now have everything we need to find events in our dataset. To actually find events, we must</p>
<ol class="arabic simple">
<li><p>Create the filter function we will use to preprocess data</p></li>
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">generator</span></code> object for each channel in our eventfinder that will loop over all the data in that channel and flag events for us while reporting progress so that we can keep track of it</p></li>
<li><p>Actually loop over the generator</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In python, a generator is an object that essentially wraps a repeated operation such that every iteration of that operation returns some sort of feedback to the calleer. In this case, the generator iterates through the data one second at a time, and at each iteration  reports progress through the file. This provides some ongoing feedback to the user (and to the poriscope GUI, when it is used there) that the operation is still continuing and has not frozen. If you don’t care to see the output and are content to wait, you can always simply ignore the output in the examples that follows.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">channels</span> <span class="o">=</span> <span class="n">event_finder</span><span class="o">.</span><span class="n">get_channels</span><span class="p">()</span>

<span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Finding events in channel </span><span class="si">{</span><span class="n">channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># eventfinders need a channel argument, a list of (start, end) pairs to set which parts of the data to look at, the length in second of the chunk of data to load, and the function to use to filter the data</span>
    <span class="c1"># this  particular eventfinder is threadsafe by channels so you could also do this in parallel by channel, but for simplicity we are doing it serially in this example.</span>
    <span class="c1"># [(0,0)] for start, end means to just read the whole channel</span>
    <span class="n">eventfinder_generator</span> <span class="o">=</span> <span class="n">event_finder</span><span class="o">.</span><span class="n">find_events</span><span class="p">(</span>
        <span class="n">channel</span><span class="p">,</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)],</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">data_filter</span><span class="o">.</span><span class="n">filter_data</span>
    <span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">eventfinder_generator</span><span class="p">))</span> <span class="c1">#the value returned here is a fraction 0-1 showing progress over the data in the given channel. Each call to next() advances the eventfiunder 1 second through the data.</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="c1"># once we run out of data to process, generators raise StopIteration, so you can catch that and move on to the next channel</span>
            <span class="k">break</span>
<span class="nb">print</span><span class="p">(</span><span class="n">event_finder</span><span class="o">.</span><span class="n">report_channel_status</span><span class="p">())</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Using a filter with a plugin as in the above example involves passing in the actual function (<code class="docutils literal notranslate"><span class="pre">data_filter.filter_data</span></code>) to the generator as an argument to be repeatedly applied as the generator progressed. If you were using the filter directly on an array of data, you would instead call <code class="docutils literal notranslate"><span class="pre">data_filter.filter_data(data)</span></code> as one would intuitively expect</p>
</div>
</section>
<section id="saving-an-event-database">
<h2>Saving an event database<a class="headerlink" href="#saving-an-event-database" title="Link to this heading">¶</a></h2>
<p>Once this loop is complete, our eventfinder will have flagged and built an internal list of all the locations at which events occurred according to your settings, but it has not saved or printed them, yet. To save them, we must create a writer object that links to an eventfinder that has completed its task in the loop above, and write a database of the events it found to disk for later analysis. As with the eventfinding step, writing to a database involves using a generator to iterate through the events found and write them to disk. As always, replace the values here with ones appropriate to your data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Now that we have found all our events we need to write them to a database</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">SQLiteEventWriter</span><span class="p">()</span>
<span class="n">writer_settings</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">get_empty_settings</span><span class="p">(</span><span class="n">standalone</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">writer_settings</span><span class="p">[</span><span class="s2">&quot;MetaEventFinder&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event_finder</span>
<span class="n">writer_settings</span><span class="p">[</span><span class="s2">&quot;Conductivity&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">writer_settings</span><span class="p">[</span><span class="s2">&quot;Voltage&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">200.0</span>
<span class="n">writer_settings</span><span class="p">[</span><span class="s2">&quot;Membrane Thickness&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">writer_settings</span><span class="p">[</span><span class="s2">&quot;Experiment Name&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;script_demo&quot;</span>
<span class="c1"># replace this with your own output file target</span>
<span class="n">writer_settings</span><span class="p">[</span><span class="s2">&quot;Output File&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&lt;&lt;Your output file path&gt;&gt;/&lt;&lt;your database name&gt;&gt;.sqlite3&quot;</span>
<span class="n">writer</span><span class="o">.</span><span class="n">apply_settings</span><span class="p">(</span><span class="n">writer_settings</span><span class="p">)</span>

<span class="c1"># writing to a database is a serial operation, and also proceeds by generator</span>

<span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Writing data for channel </span><span class="si">{</span><span class="n">channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># eventfinders need a channel argument, a list of (start, end) pairs to set which parts of the data to look at, the length in second of the chunk of data to load, and the function to use to filter the data</span>
    <span class="c1"># you could also do this in parallel by channel</span>
    <span class="c1"># [(0,0)] for start, end means to just read the whole channel</span>
    <span class="n">writer_generator</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">commit_events</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">writer_generator</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="c1"># once we run out of data to process, generators raise StopIteration, so you can catch that and move on to the next channel</span>
            <span class="k">break</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">writer</span><span class="o">.</span><span class="n">report_channel_status</span><span class="p">())</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The plugin above writes to an sqlite3 format. You can view the resulting file structure using the <a class="reference external" href="https://docs.python.org/3/library/sqlite3.html#module-sqlite3" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> module in python, or you can open it directly using a program like the <a class="reference external" href="https://sqlitebrowser.org/">DB Browser for SQLite</a>. We encourage you to familiarize yourself with the structure of this database, as it will be useful in your own scripting work in case you want to do custom analysis from here.</p>
</div>
<p>This point in the script represents completion of the operation of the <a class="reference internal" href="../../../autodoc/plugins/analysistabs/rawdataview.html#rawdataview"><span class="std std-ref">RawDataView</span></a> plugin if you were using the poriscope GUI.</p>
</section>
<section id="loading-an-event-database">
<h2>Loading an event database<a class="headerlink" href="#loading-an-event-database" title="Link to this heading">¶</a></h2>
<p>To proceed further takes us into the realm of the <a class="reference internal" href="../../../autodoc/plugins/analysistabs/eventanalysisview.html#eventanalysisview"><span class="std std-ref">EventAnalysisView</span></a> plugin, which begins by loading the database that we just wrote. We will continue scripting, but you could pass to the GUI at this point if you wanted to.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># next up, we load the event database we just wrote</span>
<span class="n">event_loader</span> <span class="o">=</span> <span class="n">SQLiteEventLoader</span><span class="p">()</span>
<span class="n">loader_settings</span> <span class="o">=</span> <span class="n">event_loader</span><span class="o">.</span><span class="n">get_empty_settings</span><span class="p">(</span><span class="n">standalone</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">loader_settings</span><span class="p">[</span><span class="s2">&quot;Input File&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&lt;&lt;Your output file path&gt;&gt;/&lt;&lt;your database name&gt;&gt;.sqlite3&quot;</span>
<span class="n">event_loader</span><span class="o">.</span><span class="n">apply_settings</span><span class="p">(</span><span class="n">loader_settings</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">event_loader</span><span class="o">.</span><span class="n">report_channel_status</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
<p>You should see printed a message reporting the number of events in each channel that is consistent with what was written in the previous step.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An obvious question to ask is “why not have event loader hook directly into event finders instead of bothering with the step of writing to disk?”. This is a design choice predicated on the idea that as nanopore datasets get larger and larger there will be a need to compress data on disk, and event writers throw out unnecessary baseline, reducing the size of datasets by a factor of up to 1000 compared to the raw data itself in some cases. It also allows modularity in workflows: a user to separate identification of interesting events from the fitting step, so that if fitting improves down the road, it is not necessary to repeat the entire workflow from scratch, without requiring the original massive dataset as the basis for updated analysis.</p>
</div>
</section>
<section id="fitting-events">
<h2>Fitting events<a class="headerlink" href="#fitting-events" title="Link to this heading">¶</a></h2>
<p>Now we get to the main challenge: given our nanopore events, how do we extract physical insight from them. Poriscope offers several options, and here we demonstrate use of CUSUM, which you may be familiar with from MOSAIC or previous work from this lab. Just like with event finding, fitting proceeds through the use of generators that report progress en route. CUSUM, like most plugins that read data, is threadsafe, but we demonstrate serial operation here for simplicity.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fitter</span> <span class="o">=</span> <span class="n">CUSUM</span><span class="p">()</span>
<span class="n">fitter_settings</span> <span class="o">=</span> <span class="n">fitter</span><span class="o">.</span><span class="n">get_empty_settings</span><span class="p">(</span><span class="n">standalone</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fitter_settings</span><span class="p">[</span><span class="s2">&quot;MetaEventLoader&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">event_loader</span>
<span class="n">fitter_settings</span><span class="p">[</span><span class="s2">&quot;Max Sublevels&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">fitter_settings</span><span class="p">[</span><span class="s2">&quot;Rise Time&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">fitter_settings</span><span class="p">[</span><span class="s2">&quot;Step Size&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1000.0</span>
<span class="n">fitter</span><span class="o">.</span><span class="n">apply_settings</span><span class="p">(</span><span class="n">fitter_settings</span><span class="p">)</span>

<span class="c1"># we could run this one in parallel in principle but for demo purposes we will keep it simple</span>

<span class="c1"># #we already know the channels, but let&#39;s double check on principle&#39;</span>
<span class="n">channels</span> <span class="o">=</span> <span class="n">fitter</span><span class="o">.</span><span class="n">get_channels</span><span class="p">()</span>

<span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fitting events for channel </span><span class="si">{</span><span class="n">channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">fitter_generator</span> <span class="o">=</span> <span class="n">fitter</span><span class="o">.</span><span class="n">fit_events</span><span class="p">(</span>
        <span class="n">channel</span><span class="p">,</span> <span class="n">data_filter</span><span class="o">=</span><span class="n">data_filter</span><span class="o">.</span><span class="n">filter_data</span>
    <span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">fitter_generator</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="c1"># once we run out of data to process, generators raise StopIteration, so you can catch that and move on to the next channel</span>
            <span class="k">break</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">fitter</span><span class="o">.</span><span class="n">report_channel_status</span><span class="p">())</span>
</pre></div>
</div>
<p>In the event that fits fail or events are rejected for any reason, the report printed at the end will detail why it happened, assuming the person who built the plugin complied with the appropriate guidelines when doing so.</p>
</section>
<section id="saving-event-metadata">
<h2>Saving event metadata<a class="headerlink" href="#saving-event-metadata" title="Link to this heading">¶</a></h2>
<p>At this point, the events are fitted and the <code class="docutils literal notranslate"><span class="pre">fitter</span></code> object has stored the metadata for each event, but it has not been saved anywhere. To save, we need to create a database writer object that will save our metadata to a predefined format, in this case <a class="reference external" href="https://docs.python.org/3/library/sqlite3.html#module-sqlite3" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> again. Note that this is a serial operation - writing to an <a class="reference external" href="https://docs.python.org/3/library/sqlite3.html#module-sqlite3" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> database is not threadsafe.</p>
<p>Of particular note here is that it is possible to write many experiments to a single sqlite3 database. If you have a previously written metadata database and you want to append to it a new experiment, simply give the existing filename of the database as the output file. The <a class="reference internal" href="../../../autodoc/plugins/dbwriters/sqlitedbwriter.html#sqlitedbwriter"><span class="std std-ref">SQLiteDBWriter</span></a> object can house as many experiments, each with as many channels and events within channels, as need be. Doing so makes it possible to analyze replicates of experiments together in one place using standard SQL queries.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">metadata_writer</span> <span class="o">=</span> <span class="n">SQLiteDBWriter</span><span class="p">()</span>
<span class="n">metadata_writer_settings</span> <span class="o">=</span> <span class="n">metadata_writer</span><span class="o">.</span><span class="n">get_empty_settings</span><span class="p">(</span><span class="n">standalone</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">metadata_writer_settings</span><span class="p">[</span><span class="s2">&quot;MetaEventFitter&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitter</span>
<span class="n">metadata_writer_settings</span><span class="p">[</span><span class="s2">&quot;Conductivity&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">metadata_writer_settings</span><span class="p">[</span><span class="s2">&quot;Voltage&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">200.0</span>
<span class="n">metadata_writer_settings</span><span class="p">[</span><span class="s2">&quot;Membrane Thickness&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">metadata_writer_settings</span><span class="p">[</span><span class="s2">&quot;Experiment Name&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;script_demo&quot;</span>
<span class="n">metadata_writer_settings</span><span class="p">[</span><span class="s2">&quot;Output File&quot;</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&lt;&lt;your output path&gt;&gt;/&lt;&lt;your database name&gt;&gt;.sqlite3&quot;</span>
<span class="n">metadata_writer</span><span class="o">.</span><span class="n">apply_settings</span><span class="p">(</span><span class="n">metadata_writer_settings</span><span class="p">)</span>

<span class="c1"># writing to a database is a serial operation</span>

<span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Writing metadata for channel </span><span class="si">{</span><span class="n">channel</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">metadata_writer_generator</span> <span class="o">=</span> <span class="n">metadata_writer</span><span class="o">.</span><span class="n">write_events</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">metadata_writer_generator</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="c1"># once we run out of data to process, generators raise StopIteration, so you can catch that and move on to the next channel</span>
            <span class="k">break</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">metadata_writer</span><span class="o">.</span><span class="n">report_channel_status</span><span class="p">())</span>
</pre></div>
</div>
<p>The printed report at the end will detail any problems that occurred. This brings us to the end of the tasks that are covered by the <a class="reference internal" href="../../../autodoc/plugins/analysistabs/eventanalysisview.html#eventanalysisview"><span class="std std-ref">EventAnalysisView</span></a> tab in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">poriscope</span></code> GUI</p>
</section>
<section id="loading-event-metadata">
<h2>Loading event metadata<a class="headerlink" href="#loading-event-metadata" title="Link to this heading">¶</a></h2>
<p>Having written our metadata, we now need to interact with it. For this final task, we use the paired <a class="reference internal" href="../../../autodoc/plugins/db_loaders/sqlitedbloader.html#sqlitedbloader"><span class="std std-ref">SQLiteDBLoader</span></a> plugin:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">metadata_loader</span> <span class="o">=</span> <span class="n">SQLiteDBLoader</span><span class="p">()</span>
<span class="n">metadata_loader_settings</span> <span class="o">=</span> <span class="n">metadata_loader</span><span class="o">.</span><span class="n">get_empty_settings</span><span class="p">(</span><span class="n">standalone</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">metadata_loader_settings</span><span class="p">[</span><span class="s2">&quot;Input File&quot;</span><span class="p">][</span>
    <span class="s2">&quot;Value&quot;</span>
<span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;C:/Users/kbriggs/OneDrive - University of Ottawa/Documents/data/Mock Server/Script Demo/script_demo_event_metadata.sqlite3&quot;</span>
<span class="n">metadata_loader</span><span class="o">.</span><span class="n">apply_settings</span><span class="p">(</span><span class="n">metadata_loader_settings</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">metadata_loader</span><span class="o">.</span><span class="n">report_channel_status</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
<p>From here, we have at our disposal the full <a class="reference internal" href="../../../autodoc/metaclasses/metadatabaseloader.html#metadatabaseloader"><span class="std std-ref">MetaDatabaseLoader</span></a> API with which to interact with the database. You can also use <a class="reference external" href="https://docs.python.org/3/library/sqlite3.html#module-sqlite3" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> or the <a class="reference external" href="https://sqlitebrowser.org/">DB Browser for SQLite</a> to interact more directly with the database if you prefer. Poriscope is quite flexible with respect to operations performed on this database, and will allow creation of new columns within existing tables as long as the relationships between the various tables are respected. You can find a full database schema in the <a class="reference internal" href="../../../autodoc/metaclasses/metadatabasewriter.html#metadatabasewriter"><span class="std std-ref">MetaDatabaseWriter</span></a> source code.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In case you are unfamiliar with SQL syntax, <a class="reference internal" href="../../../autodoc/metaclasses/metadatabaseloader.html#metadatabaseloader"><span class="std std-ref">MetaDatabaseLoader</span></a> subclasses have the <a class="reference internal" href="../../../autodoc/metaclasses/metadatabaseloader.html#poriscope.utils.MetaDatabaseLoader.MetaDatabaseLoader.get_llm_prompt" title="poriscope.utils.MetaDatabaseLoader.MetaDatabaseLoader.get_llm_prompt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_llm_prompt()</span></code></a> method that will return a string that describes the database schema in the form an LLM can understand. Pasting this string into your favorite LLM will then allow you to ask it to construct SQL queries for you. Take care to review its output and take it as an opportunity to learn SQL rather than trusting it blindly. LLMs in our experience get it right about 80% of the time.</p>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../plugins_manual/plugin_manual_index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Plugin Development</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="menus_and_sessions.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Menus and Session Management</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Kyle Briggs, Carolina González G.
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Scripting with Poriscope</a><ul>
<li><a class="reference internal" href="#setting-up-our-workspace">Setting up our workspace</a></li>
<li><a class="reference internal" href="#loading-raw-data">Loading raw data</a></li>
<li><a class="reference internal" href="#create-a-filter">Create a filter</a></li>
<li><a class="reference internal" href="#finding-events">Finding events</a></li>
<li><a class="reference internal" href="#saving-an-event-database">Saving an event database</a></li>
<li><a class="reference internal" href="#loading-an-event-database">Loading an event database</a></li>
<li><a class="reference internal" href="#fitting-events">Fitting events</a></li>
<li><a class="reference internal" href="#saving-event-metadata">Saving event metadata</a></li>
<li><a class="reference internal" href="#loading-event-metadata">Loading event metadata</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../../_static/documentation_options.js?v=e0a75244"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>